{% extends 'base.html' %}

{% block content %}
<div class="projects-section-header">
    <p>Budget Dashboard</p>
    <p class="time">{{ current_date }}</p>
</div>
        
        <!-- Finance Summary Cards -->
        <div class="project-boxes jsGridView">
            <div class="project-box-wrapper" style="width: 33.3%;">
                <div class="project-box" style="--main-color-card: #dbf6fd;">
                    <div class="project-box-header">
                        <span>Balance</span>
                    </div>
                    <div class="project-box-content-header">
                        <p class="box-content-header">₹{{ balance }}</p>
                    </div>
                </div>
            </div>
            
            <div class="project-box-wrapper" style="width: 33.3%;">
                <div class="project-box" style="--main-color-card: #e9e7fd;">
                    <div class="project-box-header">
                        <span>Income</span>
                    </div>
                    <div class="project-box-content-header">
                        <p class="box-content-header">₹{{ income }}</p>
                    </div>
                </div>
            </div>
            
            <div class="project-box-wrapper" style="width: 33.3%;">
                <div class="project-box" style="--main-color-card: #ffd3e2;">
                    <div class="project-box-header">
                        <span>Expenses</span>
                    </div>
                    <div class="project-box-content-header">
                        <p class="box-content-header">₹{{ expenses }}</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Recent Transactions -->
        <div class="market-card mt-8">
            <div class="market-card-header">
                <h2 class="market-card-title">Recent Transactions</h2>
                <a href="{% url 'budget:add_transaction' %}" class="add-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                </a>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead>
                        <tr>
                            <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                            <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                            <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                            <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                            <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        {% for transaction in transactions %}
                        <tr class="{% if transaction.transaction_type == 'income' %}text-green-600{% else %}text-red-600{% endif %}">
                            <td class="px-6 py-4 whitespace-nowrap text-sm">{{ transaction.date }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm">{{ transaction.description }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm">{{ transaction.category.name }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm">{{ transaction.get_transaction_type_display }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">₹{{ transaction.amount }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="5" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">No transactions found</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}